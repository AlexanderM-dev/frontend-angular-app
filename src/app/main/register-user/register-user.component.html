<div class="register-user-wrapper">

    <div class="btn-toggle">
        <button class="btn" mat-raised-button (click)="togglePanel()">Register company user</button>
    </div>

    <mat-expansion-panel class="exp-panel" [expanded]="panelOpenState" [ngClass]="{
        'exp-pan-success': success,
        'exp-pan-fail': fail
    }">

        <p class="error-message">{{message}}</p>

        <form class="register-user-inputs" *ngIf="!success">

            <mat-form-field class="input">
                <mat-label>Name</mat-label>
                <input type="text" matInput [formControl]="nameFormControl" placeholder="Enter users name..."
                    [(ngModel)]="nameValue" (keydown.esc)="nameValue=''" autocomplete="off">
                <button mat-button *ngIf="nameValue" matSuffix mat-icon-button aria-label="Clear"
                    (click)="nameValue=''">
                    <mat-icon>close</mat-icon>
                </button>
                <mat-error *ngIf="nameFormControl.hasError('required')">
                    Name is <strong>required</strong>
                </mat-error>
                <mat-error *ngIf="nameFormControl.hasError('minlength') || nameFormControl.hasError('maxlength') ">
                    Name must be from 2 to 20 symbols
                </mat-error>
            </mat-form-field>

            <mat-form-field class="input">
                <mat-label>Surname</mat-label>
                <input type="text" matInput [formControl]="surnameFormControl" placeholder="Enter users surname..."
                    [(ngModel)]="surnameValue" (keydown.esc)="surnameValue=''" autocomplete="off">
                <button mat-button *ngIf="surnameValue" matSuffix mat-icon-button aria-label="Clear"
                    (click)="surnameValue=''">
                    <mat-icon>close</mat-icon>
                </button>
                <mat-error *ngIf="surnameFormControl.hasError('required')">
                    Surname is <strong>required</strong>
                </mat-error>
                <mat-error
                    *ngIf="surnameFormControl.hasError('minlength') || surnameFormControl.hasError('maxlength') ">
                    Surname must be from 2 to 20 symbols
                </mat-error>
            </mat-form-field>

            <mat-form-field class="input">
                <mat-label>Email</mat-label>
                <input type="email" matInput [formControl]="emailFormControl" placeholder="Enter users email..."
                    [(ngModel)]="emailValue" (keydown.esc)="emailValue=''" autocomplete="off">
                <button mat-button *ngIf="emailValue" matSuffix mat-icon-button aria-label="Clear"
                    (click)="emailValue=''">
                    <mat-icon>close</mat-icon>
                </button>
                <mat-error *ngIf="emailFormControl.hasError('email') && !emailFormControl.hasError('required')">
                    Please enter a valid email address
                </mat-error>
                <mat-error *ngIf="emailFormControl.hasError('required')">
                    Email is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="input">
                <mat-label>Password</mat-label>
                <input type="password" matInput [formControl]="passFormControl" placeholder="Enter users password..."
                    [(ngModel)]="passValue" (keydown.esc)="passValue=''" autocomplete="off">
                <button mat-button *ngIf="passValue" matSuffix mat-icon-button aria-label="Clear"
                    (click)="passValue=''">
                    <mat-icon>close</mat-icon>
                </button>
                <mat-error *ngIf="passFormControl.hasError('minlength') && !passFormControl.hasError('required')">
                    Password must be at least 4 symbols
                </mat-error>
                <mat-error *ngIf="passFormControl.hasError('required')">
                    Password is <strong>required</strong>
                </mat-error>
            </mat-form-field>

            <div class="btns">

                <button class="btn" type="reset" mat-button (click)="togglePanel(); clearInputs()">
                    <mat-icon style="color: red;">close</mat-icon>
                </button>

                <button class="btn" type="submit" mat-button (click)='registerCompanyAdmin()'
                    [disabled]="nameFormControl.invalid || surnameFormControl.invalid || emailFormControl.invalid || passFormControl.invalid || submitted">
                    <mat-icon style="color: green;">done</mat-icon>
                </button>

            </div>

        </form>

        <div class="user-registered" *ngIf="success">
            <h2>Registration successful!</h2>
        </div>

    </mat-expansion-panel>

</div>